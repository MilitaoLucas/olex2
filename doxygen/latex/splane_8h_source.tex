\doxysection{splane.\+h}
\hypertarget{splane_8h_source}{}\label{splane_8h_source}\index{xlib/splane.h@{xlib/splane.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/******************************************************************************}}
\DoxyCodeLine{00002\ \textcolor{comment}{*\ Copyright\ (c)\ 2004-\/2011\ O.\ Dolomanov,\ OlexSys\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{*\ This\ file\ is\ part\ of\ the\ OlexSys\ Development\ Framework.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{*\ This\ source\ file\ is\ distributed\ under\ the\ terms\ of\ the\ licence\ located\ in\ \ \ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{*\ the\ root\ folder.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00008\ \textcolor{comment}{******************************************************************************/}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ \_\_olx\_xl\_splane\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ \_\_olx\_xl\_splane\_H}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}xbase.h"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}typelist.h"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}satom.h"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}math/plane.h"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}md5.h"{}}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ BeginXlibNamespace()}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ class\ \mbox{\hyperlink{classTAtomEnvi}{TAtomEnvi}};}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ const\ uint16\_t}
\DoxyCodeLine{00023\ \ \ plane\_best\ =\ 1,}
\DoxyCodeLine{00024\ \ \ plane\_worst\ =\ 2;}
\DoxyCodeLine{00025\ const\ uint16\_t}
\DoxyCodeLine{00026\ \ \ plane\_flag\_deleted\ =\ 0x0001;}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ class\ TSPlane\ :\ public\ TSObject<\mbox{\hyperlink{classTNetwork}{TNetwork}}>\ \{}
\DoxyCodeLine{00029\ \ \ \mbox{\hyperlink{classTTypeList}{TTypeList<olx\_pair\_t<TSAtom*,\ double>}}\ >\ Crds;}
\DoxyCodeLine{00030\ \ \ vec3d\ Center;}
\DoxyCodeLine{00031\ \ \ mat3d\ Normals;}
\DoxyCodeLine{00032\ \ \ \textcolor{keywordtype}{double}\ Distance,\ wRMSD;\ \ uint16\_t\ Flags;}
\DoxyCodeLine{00033\ \ \ \textcolor{keywordtype}{size\_t}\ DefId;}
\DoxyCodeLine{00034\ \ \ \textcolor{keywordtype}{void}\ \_Init(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTTypeList}{TTypeList}}<\mbox{\hyperlink{structolx__pair__t}{olx\_pair\_t<vec3d,\ double>}}\ >\&\ points);}
\DoxyCodeLine{00035\ \ \ \textcolor{comment}{//\ for\ Crd\ sorting\ by\ atom\ tag}}
\DoxyCodeLine{00036\ \ \ \textcolor{keyword}{struct\ }AtomTagAccessor\ \{}
\DoxyCodeLine{00037\ \ \ \ \ index\_t\ operator()\ (}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structolx__pair__t}{olx\_pair\_t<TSAtom*,\ double>}}*\ p)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00039\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ p-\/>GetA()-\/>GetTag();}
\DoxyCodeLine{00041\ \ \ \ \ \}}
\DoxyCodeLine{00042\ \ \ \};}
\DoxyCodeLine{00043\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00044\ \ \ TSPlane()\ :\ TSObject<TNetwork>(0),\ DefId(InvalidIndex)}
\DoxyCodeLine{00045\ \ \ \{\}}
\DoxyCodeLine{00046\ \ \ TSPlane(\mbox{\hyperlink{classTNetwork}{TNetwork}}*\ Parent,\ \textcolor{keywordtype}{size\_t}\ def\_id\ =\ InvalidIndex)}
\DoxyCodeLine{00047\ \ \ \ \ :\ TSObject<TNetwork>(Parent),\ Distance(0),\ wRMSD(0),\ Flags(0),}
\DoxyCodeLine{00048\ \ \ \ \ DefId(def\_id)}
\DoxyCodeLine{00049\ \ \ \{\}}
\DoxyCodeLine{00050\ \ \ \textcolor{keyword}{virtual}\ \string~TSPlane()\ \{\}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ DefPropBFIsSet(Deleted,\ Flags,\ plane\_flag\_deleted);}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \textcolor{comment}{//\ an\ association\ point,\ weight\ is\ provided}}
\DoxyCodeLine{00055\ \ \ \textcolor{keywordtype}{void}\ Init(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTTypeList}{TTypeList}}<\mbox{\hyperlink{structolx__pair__t}{olx\_pair\_t<TSAtom*,\ double>}}\ >\&\ Points);}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ vec3d\&\ GetNormal()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Normals[0];\ \}}
\DoxyCodeLine{00058\ \ \ \textcolor{comment}{//\ note\ that\ the\ Normal\ (or\ Z)\ is\ the\ first\ row\ of\ the\ matrix}}
\DoxyCodeLine{00059\ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ mat3d\&\ GetBasis()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Normals;\ \}}
\DoxyCodeLine{00060\ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ vec3d\&\ GetCenter()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Center;\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \textcolor{keywordtype}{double}\ DistanceTo(\textcolor{keyword}{const}\ vec3d\&\ Crd)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordflow}{return}\ Crd.DotProd(GetNormal())\ -\/\ Distance;}
\DoxyCodeLine{00064\ \ \ \}}
\DoxyCodeLine{00065\ \ \ \textcolor{keywordtype}{double}\ DistanceTo(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTSAtom}{TSAtom}}\&\ a)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ DistanceTo(a.crd());\ \}}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordtype}{double}\ Angle(\textcolor{keyword}{const}\ vec3d\&\ A,\ \textcolor{keyword}{const}\ vec3d\&\ B)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{return}\ acos(GetNormal().CAngle(B\ -\/\ A))\ *\ 180\ /\ M\_PI;}
\DoxyCodeLine{00068\ \ \ \}}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{double}\ Angle(\textcolor{keyword}{const}\ vec3d\&\ v)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordflow}{return}\ acos(GetNormal().CAngle(v))\ *\ 180\ /\ M\_PI;}
\DoxyCodeLine{00071\ \ \ \}}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordtype}{double}\ Angle(\textcolor{keyword}{const}\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classTSBond}{TSBond}}\&\ B)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00073\ \ \ \textcolor{keywordtype}{double}\ Angle(\textcolor{keyword}{const}\ TSPlane\&\ P)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Angle(P.GetNormal());\ \}}
\DoxyCodeLine{00074\ \ \ \textcolor{keywordtype}{double}\ GetD()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Distance;\ \}}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ direct\ calculation\ with\ unit\ weights}}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{double}\ CalcRMSD()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00077\ \ \ \textcolor{comment}{//\ inverts\ the\ plane\ normal}}
\DoxyCodeLine{00078\ \ \ \textcolor{keywordtype}{void}\ Invert();}
\DoxyCodeLine{00079\ \ \ \textcolor{comment}{//\ calculation\ with\ actual\ weights\ (should\ be\ the\ same\ as\ GetWeightedRMSD)}}
\DoxyCodeLine{00080\ \ \ \textcolor{keywordtype}{double}\ CalcWeightedRMSD()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00081\ \ \ \textcolor{keywordtype}{double}\ GetWeightedRMSD()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ wRMSD;\ \}}
\DoxyCodeLine{00082\ \ \ \textcolor{keywordtype}{double}\ GetZ(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\&\ X,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\&\ Y)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordflow}{return}\ (GetNormal()[2]\ ==\ 0)\ ?\ 0.0}
\DoxyCodeLine{00084\ \ \ \ \ \ \ :\ (GetNormal()[0]\ *\ X\ +\ GetNormal()[1]\ *\ Y\ +\ Distance)\ /\ GetNormal()[2];}
\DoxyCodeLine{00085\ \ \ \}}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{size\_t}\ Count()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Crds.Count();\ \}}
\DoxyCodeLine{00087\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTSAtom}{TSAtom}}\&\ GetAtom(\textcolor{keywordtype}{size\_t}\ i)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *Crds[i].GetA();\ \}}
\DoxyCodeLine{00088\ \ \ \mbox{\hyperlink{classTSAtom}{TSAtom}}\&\ GetAtom(\textcolor{keywordtype}{size\_t}\ i)\ \{\ \textcolor{keywordflow}{return}\ *Crds[i].a;\ \}}
\DoxyCodeLine{00089\ \ \ \textcolor{keywordtype}{double}\ GetWeight(\textcolor{keywordtype}{size\_t}\ i)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Crds[i].GetB();\ \}}
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{void}\ \_PlaneSortByAtomTags()\ \{}
\DoxyCodeLine{00091\ \ \ \ \ QuickSorter::Sort(Crds,}
\DoxyCodeLine{00092\ \ \ \ \ \ \ ComplexComparator::Make(AtomTagAccessor(),\ TPrimitiveComparator()));}
\DoxyCodeLine{00093\ \ \ \}}
\DoxyCodeLine{00094\ \ \ \textcolor{comment}{/*\ returns\ inverse\ intersects\ with\ the\ lattice\ vectors,\ the\ vector\ is\ divided}}
\DoxyCodeLine{00095\ \textcolor{comment}{\ \ by\ modulus\ of\ the\ smallest\ non-\/zero\ value.\ Takes\ the\ orthogonalisation\ matrix}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ plane\ normal\ and\ a\ point\ on\ the\ plane}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{static}\ vec3d\ GetCrystallographicDirection(\textcolor{keyword}{const}\ mat3d\&\ m,}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keyword}{const}\ vec3d\&\ n,\ \textcolor{keyword}{const}\ vec3d\&\ p);}
\DoxyCodeLine{00100\ \ \ vec3d\ GetCrystallographicDirection()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00101\ \ \ \textcolor{comment}{//\ returns\ sqrt(smallest\ eigen\ value/point.Count())}}
\DoxyCodeLine{00102\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ CalcRMSD(\textcolor{keyword}{const}\ TSAtomPList\&\ atoms);}
\DoxyCodeLine{00103\ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{double}\ CalcRMSD(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTAtomEnvi}{TAtomEnvi}}\&\ atoms);}
\DoxyCodeLine{00104\ \ \ olxstr\ StrRepr()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \textcolor{keyword}{class\ }Def\ :\ \textcolor{keyword}{public}\ ACollectionItem\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{struct\ }DefData\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \mbox{\hyperlink{structTSAtom_1_1Ref}{TSAtom::Ref}}\ ref;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ weight;}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \textcolor{comment}{//\ need\ one\ for\ TypeList\ allocation...}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ DefData()\ \{\}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ DefData(\textcolor{keyword}{const}\ \mbox{\hyperlink{structTSAtom_1_1Ref}{TSAtom::Ref}}\&\ r,\ \textcolor{keywordtype}{double}\ w)}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ :\ ref(r),\ weight(w)}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ DefData(\textcolor{keyword}{const}\ DefData\&\ r)}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ :\ ref(r.ref),\ weight(r.weight)}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \{\}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ DefData(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app)}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ :\ ref(item.GetItemByIndex(0),\ app)}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ weight\ =\ item.GetFieldByName(\textcolor{stringliteral}{"{}weight"{}}).ToDouble();}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ DefData\&\ operator\ =\ (\textcolor{keyword}{const}\ DefData\&\ r)\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ ref\ =\ r.ref;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ weight\ =\ r.weight;}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ Compare(\textcolor{keyword}{const}\ DefData\&\ d)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ref.Compare(d.ref);}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ ToDataItem(\mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app,\ \textcolor{keywordtype}{bool}\ use\_id=\textcolor{keyword}{false})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ FromDataItem(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTXApp}{TXApp}}\ \&app);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \textcolor{comment}{//\ a\ string\ hash\ for\ the\ plane\ definition}}
\DoxyCodeLine{00134\ \ \ \ \ \ \ TIString\ ToString()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ olxstr\_buf\ rv;}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ olxstr(rv\ <<\ ref.ToString()\ <<\ weight);}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00138\ \ \ \ \ \};}
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classTTypeList}{TTypeList<DefData>}}\ atoms;}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ sides;}
\DoxyCodeLine{00141\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00142\ \ \ \ \ Def(\textcolor{keyword}{const}\ TSPlane\&\ plane);}
\DoxyCodeLine{00143\ \ \ \ \ Def(\textcolor{keyword}{const}\ Def\&\ r)\ :\ atoms(r.atoms),\ sides(r.sides)}
\DoxyCodeLine{00144\ \ \ \ \ \{\}}
\DoxyCodeLine{00145\ \ \ \ \ Def(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app)\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ FromDataItem(item,\ app);}
\DoxyCodeLine{00147\ \ \ \ \ \}}
\DoxyCodeLine{00148\ \ \ \ \ Def\&\ operator\ =\ (\textcolor{keyword}{const}\ Def\&\ r)\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ atoms\ =\ r.atoms;}
\DoxyCodeLine{00150\ \ \ \ \ \ \ sides\ =\ r.sides;}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordtype}{bool}\ operator\ ==\ (\textcolor{keyword}{const}\ Def\&\ d)\textcolor{keyword}{\ \ const\ }\{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Compare(d)\ ==\ 0;}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordtype}{int}\ Compare(\textcolor{keyword}{const}\ Def\&\ d)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00157\ \ \ \ \ TSPlane*\ FromAtomRegistry(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app,\ \textcolor{keyword}{struct}\ \mbox{\hyperlink{structASObjectProvider}{ASObjectProvider}}\&\ ar,\ \textcolor{keywordtype}{size\_t}\ def\_id,}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \textcolor{keyword}{class}\ \mbox{\hyperlink{classTNetwork}{TNetwork}}*\ parent,\ \textcolor{keyword}{const}\ smatd\&\ matr)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{void}\ ToDataItem(\mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app,\ \textcolor{keywordtype}{bool}\ use\_id=\textcolor{keyword}{false})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordtype}{void}\ FromDataItem(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app);}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ GetSides()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ sides;\ \}}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordtype}{void}\ SetSides(\textcolor{keywordtype}{size\_t}\ s)\ \{\ sides\ =\ s;\ \}}
\DoxyCodeLine{00163\ \ \ \ \ \mbox{\hyperlink{classTSPlane_1_1Def}{TSPlane::Def}}\&\ Sort()\ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ QuickSorter::Sort(atoms);}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ a\ string\ hash\ for\ the\ plane\ definition}}
\DoxyCodeLine{00169\ \ \ \ \ TIString\ ToString()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ olxstr\_buf\ rv;}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ atoms.Count();\ i++)\ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ rv\ <<\ atoms[i].ToString();}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ olxstr(MD5::Digest(olxstr(rv\ <<\ sides)));}
\DoxyCodeLine{00175\ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \};}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \mbox{\hyperlink{classTSPlane_1_1Def}{Def}}\ GetDef()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classTSPlane_1_1Def}{Def}}(*\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00179\ \ \ \textcolor{keywordtype}{size\_t}\ GetDefId()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ DefId;\ \}}
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{//\ not\ for\ external\ use}}
\DoxyCodeLine{00181\ \ \ \textcolor{keywordtype}{void}\ \_SetDefId(\textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id})\ \{\ DefId\ =\ id;\ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ ToDataItem(\mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \textcolor{keyword}{class}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00184\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ FromDataItem(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classTXApp}{TXApp}}\&\ app);}
\DoxyCodeLine{00185\ \};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classTTypeList}{TTypeList<TSPlane>}}\ TSPlaneList;}
\DoxyCodeLine{00188\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classTPtrList}{TPtrList<TSPlane>}}\ TSPlanePList;}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ EndXlibNamespace()}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
