\doxysection{srestraint.\+h}
\hypertarget{srestraint_8h_source}{}\label{srestraint_8h_source}\index{xlib/srestraint.h@{xlib/srestraint.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/******************************************************************************}}
\DoxyCodeLine{00002\ \textcolor{comment}{*\ Copyright\ (c)\ 2004-\/2024\ O.\ Dolomanov,\ OlexSys\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{*\ This\ file\ is\ part\ of\ the\ OlexSys\ Development\ Framework.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{*\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{*\ This\ source\ file\ is\ distributed\ under\ the\ terms\ of\ the\ licence\ located\ in\ \ \ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{*\ the\ root\ folder.\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00008\ \textcolor{comment}{******************************************************************************/}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ \_\_olx\_xl\_srestraint\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ \_\_olx\_xl\_srestraint\_H}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}catomlist.h"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}releasable.h"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#undef\ AddAtom}}
\DoxyCodeLine{00015\ BeginXlibNamespace()}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ class\ \mbox{\hyperlink{classTAsymmUnit}{TAsymmUnit}};}
\DoxyCodeLine{00018\ class\ \mbox{\hyperlink{classRefinementModel}{RefinementModel}};}
\DoxyCodeLine{00019\ class\ \mbox{\hyperlink{classTSRestraintList}{TSRestraintList}};}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ restraint\ atom\ list\ types}}
\DoxyCodeLine{00021\ const\ \textcolor{keywordtype}{short}}
\DoxyCodeLine{00022\ \ \ rltNone\ \ \ \ =\ 0,\ \textcolor{comment}{//\ default\ value\ for\ the\ constructor...}}
\DoxyCodeLine{00023\ \ \ rltAtoms1N\ =\ 1,\ \textcolor{comment}{//\ set\ of\ independent\ atoms}}
\DoxyCodeLine{00024\ \ \ rltAtoms2N\ =\ 2,\ \textcolor{comment}{//\ set\ of\ 2\ or\ more\ independent\ atoms}}
\DoxyCodeLine{00025\ \ \ rltAtoms3N\ =\ 3,\ \textcolor{comment}{//\ set\ of\ 3\ or\ more\ independent\ atoms}}
\DoxyCodeLine{00026\ \ \ rltAtoms4N\ =\ 4,\ \textcolor{comment}{//\ set\ of\ 4\ or\ more\ independent\ atoms}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ rltGroup2\ \ =\ 5,\ \textcolor{comment}{//\ set\ of\ "{}bonds"{}\ -\/\ atom\ pairs}}
\DoxyCodeLine{00029\ \ \ rltGroup3\ \ =\ 6,\ \textcolor{comment}{//\ set\ of\ "{}angles"{}\ -\/\ atom\ triplets}}
\DoxyCodeLine{00030\ \ \ rltGroup4\ \ =\ 7;\ \textcolor{comment}{//\ dihedrals}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ const\ \textcolor{keywordtype}{short}}
\DoxyCodeLine{00033\ \ \ rptNone\ \ \ =\ 0x0000,}
\DoxyCodeLine{00034\ \ \ rptValue\ \ =\ 0x0001,}
\DoxyCodeLine{00035\ \ \ rptEsd\ \ \ \ =\ 0x0002,}
\DoxyCodeLine{00036\ \ \ rptEsd1\ \ \ =\ 0x0004,}
\DoxyCodeLine{00037\ \ \ rptValue1\ =\ 0x0008}
\DoxyCodeLine{00038\ \ \ ;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ class\ \mbox{\hyperlink{classTSAtom}{TSAtom}};}
\DoxyCodeLine{00041\ class\ \mbox{\hyperlink{classTSRestraintList}{TSRestraintList}};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ class\ TSimpleRestraint\ :\ public\ \mbox{\hyperlink{classIXVarReferencer}{IXVarReferencer}},\ public\ AReleasable\ \{}
\DoxyCodeLine{00044\ \ \ \textcolor{keywordtype}{size\_t}\ Position;}
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{short}\ ListType;}
\DoxyCodeLine{00046\ \ \ \textcolor{keywordtype}{double}\ Value,\ Esd,\ Esd1;}
\DoxyCodeLine{00047\ \ \ \mbox{\hyperlink{structXVarReference}{XVarReference}}*\ VarRef;}
\DoxyCodeLine{00048\ \ \ \textcolor{keywordtype}{bool}\ AllNonHAtoms;}
\DoxyCodeLine{00049\ \ \ \mbox{\hyperlink{classAtomRefList}{AtomRefList}}\ Atoms;}
\DoxyCodeLine{00050\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00051\ \ \ TSimpleRestraint(TSRestraintList\&\ parent,\ \textcolor{keywordtype}{short}\ listType);}
\DoxyCodeLine{00052\ \ \ \textcolor{keyword}{virtual}\ \string~TSimpleRestraint()\ \{\}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ TSRestraintList\&\ GetParent()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00055\ \ \ }
\DoxyCodeLine{00056\ \ \ \textcolor{keywordtype}{void}\ AddAtoms(\textcolor{keyword}{const}\ TCAtomGroup\&\ atoms);}
\DoxyCodeLine{00057\ \ \ TSimpleRestraint\ \&AddAtom(\mbox{\hyperlink{classTCAtom}{TCAtom}}\&\ aa,\ \textcolor{keyword}{const}\ smatd*\ ma);}
\DoxyCodeLine{00058\ \ \ TSimpleRestraint\ \&AddAtom(\mbox{\hyperlink{classTGroupCAtom}{TGroupCAtom}}\&\ a)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordflow}{return}\ AddAtom(*a.GetAtom(),\ a.GetMatrix());}
\DoxyCodeLine{00060\ \ \ \}}
\DoxyCodeLine{00061\ \ \ TSimpleRestraint\ \&AddAtomPair(\mbox{\hyperlink{classTCAtom}{TCAtom}}\&\ aa,\ \textcolor{keyword}{const}\ smatd*\ ma,}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classTCAtom}{TCAtom}}\&\ ab,\ \textcolor{keyword}{const}\ smatd*\ mb)}
\DoxyCodeLine{00063\ \ \ \{}
\DoxyCodeLine{00064\ \ \ \ \ AddAtom(aa,\ ma);}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ AddAtom(ab,\ mb);}
\DoxyCodeLine{00066\ \ \ \}}
\DoxyCodeLine{00067\ \ \ TSimpleRestraint\&\ AddAtomPair(\mbox{\hyperlink{classTSAtom}{TSAtom}}\&\ aa,\ \mbox{\hyperlink{classTSAtom}{TSAtom}}\&\ ab);}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{void}\ AtomsFromExpression(\textcolor{keyword}{const}\ olxstr\ \&e,\ \textcolor{keyword}{const}\ olxstr\ \&resi\ =\ EmptyString());}
\DoxyCodeLine{00069\ \ \ \textcolor{keywordtype}{void}\ SetAtoms(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTPtrList}{TPtrList<TSAtom>}}\ \&atoms)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ Atoms.Build(atoms);}
\DoxyCodeLine{00071\ \ \ \}}
\DoxyCodeLine{00072\ \ \ \textcolor{keywordtype}{void}\ ConvertToImplicit()\ \{\ Atoms.ConvertToImplicit();\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classAtomRefList}{AtomRefList}}\ \&GetAtoms()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Atoms;\ \}}
\DoxyCodeLine{00075\ \ \ \textcolor{comment}{//\ clears\ atoms\ and\ assiciated\ VarRef}}
\DoxyCodeLine{00076\ \ \ \textcolor{keywordtype}{void}\ Delete();}
\DoxyCodeLine{00077\ \ \ \textcolor{keywordtype}{bool}\ IsEmpty()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Atoms.IsEmpty();\ \}}
\DoxyCodeLine{00078\ \ \ olxstr\ GetAtomExpression()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Atoms.GetExpression();\ \}}
\DoxyCodeLine{00079\ \ \ \textcolor{keywordtype}{void}\ UpdateResi()\ \{\ Atoms.UpdateResi();\ \}}
\DoxyCodeLine{00080\ \ \ \textcolor{comment}{//\ in\ the\ case\ the\ atom\ list\ becomes\ empty\ -\/\ clears\ VarRef}}
\DoxyCodeLine{00081\ \ \ TSimpleRestraint\ \&Validate();}
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{//\ this\ is\ called\ internally\ by\ the\ RM}}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordtype}{void}\ OnAUUpdate();}
\DoxyCodeLine{00084\ \ \ \textcolor{keywordtype}{void}\ BeginAUSort()\ \{\ Atoms.BeginAUSort();\ \}}
\DoxyCodeLine{00085\ \ \ \textcolor{keywordtype}{void}\ EndAUSort();}
\DoxyCodeLine{00086\ \ \ \textcolor{keywordtype}{void}\ Sort()\ \{\ Atoms.SortByTag(\mbox{\hyperlink{classTPtrList}{TPtrList<AtomRefList>}}());\ \}}
\DoxyCodeLine{00087\ \ \ \textcolor{comment}{//\ copies\ data\ from\ a\ restrain,\ but\ with\ atoms\ from\ the\ thisAU}}
\DoxyCodeLine{00088\ \ \ \textcolor{keywordtype}{void}\ Assign(\textcolor{keyword}{const}\ TSimpleRestraint\ \&r);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{short}\ GetListType()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ ListType;\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \textcolor{keywordtype}{size\_t}\ GetGroupSize()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{return}\ ListType\ >=\ rltGroup2\ \&\&\ ListType\ <=\ rltGroup4}
\DoxyCodeLine{00094\ \ \ \ \ \ \ ?\ ((ListType\ -\/\ rltGroup2)\ +\ 2)}
\DoxyCodeLine{00095\ \ \ \ \ \ \ :\ InvalidIndex;}
\DoxyCodeLine{00096\ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ DefPropP(\textcolor{keywordtype}{size\_t},\ Position);}
\DoxyCodeLine{00099\ \ \ DefPropP(\textcolor{keywordtype}{double},\ Value);}
\DoxyCodeLine{00100\ \ \ DefPropP(\textcolor{keywordtype}{double},\ Esd);}
\DoxyCodeLine{00101\ \ \ DefPropP(\textcolor{keywordtype}{double},\ Esd1);}
\DoxyCodeLine{00102\ \ \ DefPropBIsSet(AllNonHAtoms);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \textcolor{keywordtype}{size\_t}\ GetId()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ this-\/>GetReleasableId();\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ TStrList\ remarks;}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \textcolor{comment}{//\ compares\ pointer\ addresses\ only!}}
\DoxyCodeLine{00109\ \ \ \textcolor{keywordtype}{bool}\ operator\ ==\ (\textcolor{keyword}{const}\ TSimpleRestraint\&\ sr)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this}\ ==\ \&sr;\ \}}
\DoxyCodeLine{00110\ \ \ \textcolor{comment}{//\ IXVarReferencer\ implementation}}
\DoxyCodeLine{00111\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{size\_t}\ VarCount()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ 1;\ \}}
\DoxyCodeLine{00112\ \ \ \textcolor{comment}{//\ for\ "{}released"{}\ restraints\ this\ must\ be\ deleted\ manually}}
\DoxyCodeLine{00113\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{structXVarReference}{XVarReference}}*\ GetVarRef(\textcolor{keywordtype}{size\_t}\ var\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordflow}{if}\ (var\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classTInvalidArgumentException}{TInvalidArgumentException}}(\_\_OlxSourceInfo,\ \textcolor{stringliteral}{"{}var\ index"{}});}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordflow}{return}\ VarRef;}
\DoxyCodeLine{00118\ \ \ \}}
\DoxyCodeLine{00119\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ OnReleasedDelete()\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{if}\ (GetVarRef(0)\ !=\ 0)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \textcolor{keyword}{delete}\ GetVarRef(0);}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{keyword}{virtual}\ olxstr\ GetVarName(\textcolor{keywordtype}{size\_t}\ var\_index)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ SetVarRef(\textcolor{keywordtype}{size\_t}\ var\_index,\ \mbox{\hyperlink{structXVarReference}{XVarReference}}*\ var\_ref)\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}\ (var\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classTInvalidArgumentException}{TInvalidArgumentException}}(\_\_OlxSourceInfo,\ \textcolor{stringliteral}{"{}var\ index"{}});}
\DoxyCodeLine{00130\ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ VarRef\ =\ var\_ref;}
\DoxyCodeLine{00132\ \ \ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classIXVarReferencerContainer}{IXVarReferencerContainer}}\&\ GetParentContainer()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{double}\ GetValue(\textcolor{keywordtype}{size\_t}\ var\_index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{if}\ (var\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classTInvalidArgumentException}{TInvalidArgumentException}}(\_\_OlxSourceInfo,\ \textcolor{stringliteral}{"{}var\ index"{}});}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{return}\ Value;}
\DoxyCodeLine{00141\ \ \ \}}
\DoxyCodeLine{00142\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ SetValue(\textcolor{keywordtype}{size\_t}\ var\_index,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\&\ val)\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{if}\ (var\_index\ !=\ 0)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classTInvalidArgumentException}{TInvalidArgumentException}}(\_\_OlxSourceInfo,\ \textcolor{stringliteral}{"{}var\ index"{}});}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ \ \ \ \ Value\ =\ val;}
\DoxyCodeLine{00147\ \ \ \}}
\DoxyCodeLine{00148\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ IsValid()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{return}\ Atoms.IsEmpty()\ ?\ AllNonHAtoms\ :\ \textcolor{keyword}{true};}
\DoxyCodeLine{00150\ \ \ \}}
\DoxyCodeLine{00151\ \ \ \textcolor{keyword}{virtual}\ olxstr\ GetIdName()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00152\ \ \ \textcolor{keywordtype}{void}\ ToDataItem(\mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00153\ \ \ \textcolor{keyword}{virtual}\ TIString\ ToString()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#ifdef\ \_PYTHON}}
\DoxyCodeLine{00155\ \ \ \mbox{\hyperlink{classConstPtrList}{ConstPtrList<PyObject>}}\ PyExport(\mbox{\hyperlink{classTPtrList}{TPtrList<PyObject>}}\&\ atoms,}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{classTPtrList}{TPtrList<PyObject>}}\&\ equiv);}
\DoxyCodeLine{00157\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00158\ \ \ \textcolor{keywordtype}{void}\ FromDataItem(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item);}
\DoxyCodeLine{00159\ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }TSRestraintList;}
\DoxyCodeLine{00160\ \};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{keyword}{class\ }TSRestraintList\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classIXVarReferencerContainer}{IXVarReferencerContainer}},}
\DoxyCodeLine{00163\ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classAReleasableContainer}{AReleasableContainer}}<TSimpleRestraint>}
\DoxyCodeLine{00164\ \{}
\DoxyCodeLine{00165\ \ \ \textcolor{keywordtype}{short}\ RestraintListType;}
\DoxyCodeLine{00166\ \ \ \mbox{\hyperlink{classRefinementModel}{RefinementModel}}\&\ RefMod;}
\DoxyCodeLine{00167\ \ \ olxstr\ IdName;}
\DoxyCodeLine{00168\ \ \ \textcolor{keywordtype}{short}\ parameters;\ \textcolor{comment}{//\ a\ combination\ of\ the\ rptXXX\ constants}}
\DoxyCodeLine{00169\ \ \ \textcolor{keywordtype}{bool}\ AllowSymm;}
\DoxyCodeLine{00170\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ OnRestore(\mbox{\hyperlink{classTSimpleRestraint}{TSimpleRestraint}}\&\ item);}
\DoxyCodeLine{00171\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ OnRelease(\mbox{\hyperlink{classTSimpleRestraint}{TSimpleRestraint}}\&\ item);}
\DoxyCodeLine{00172\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00173\ \ \ TSRestraintList(\mbox{\hyperlink{classRefinementModel}{RefinementModel}}\&\ rm,\ \textcolor{keywordtype}{short}\ restraintListType,}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keyword}{const}\ olxstr\&\ id\_name,\ \textcolor{keywordtype}{short}\ parameters,\ \textcolor{keywordtype}{bool}\ allow\_symm)}
\DoxyCodeLine{00175\ \ \ \ \ :\ RestraintListType(restraintListType),}
\DoxyCodeLine{00176\ \ \ \ \ RefMod(rm),\ IdName(id\_name),\ parameters(parameters),\ AllowSymm(allow\_symm)}
\DoxyCodeLine{00177\ \ \ \{\}}
\DoxyCodeLine{00178\ \ \ \textcolor{keyword}{virtual}\ \string~TSRestraintList()\ \{\}}
\DoxyCodeLine{00179\ \ \ \mbox{\hyperlink{classTSimpleRestraint}{TSimpleRestraint}}\&\ AddNew();}
\DoxyCodeLine{00180\ \ \ \textcolor{comment}{/*\ function\ checks\ uniquesness\ of\ the\ restraint\ data\ -\/\ previously\ defined}}
\DoxyCodeLine{00181\ \textcolor{comment}{\ \ values\ are\ removed}}
\DoxyCodeLine{00182\ \textcolor{comment}{\ \ */}}
\DoxyCodeLine{00183\ \ \ \textcolor{keywordtype}{void}\ ValidateRestraint(\mbox{\hyperlink{classTSimpleRestraint}{TSimpleRestraint}}\&\ sr);}
\DoxyCodeLine{00184\ \ \ \textcolor{keywordtype}{void}\ ValidateAll();}
\DoxyCodeLine{00185\ \ \ \textcolor{keywordtype}{bool}\ DoAllowSymmetry()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordflow}{return}\ AllowSymm;}
\DoxyCodeLine{00187\ \ \ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRefinementModel}{RefinementModel}}\&\ GetRM()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ RefMod;\ \}}
\DoxyCodeLine{00190\ \ \ \mbox{\hyperlink{classRefinementModel}{RefinementModel}}\&\ GetRM()\ \{\ \textcolor{keywordflow}{return}\ RefMod;\ \}}
\DoxyCodeLine{00191\ \ \ \textcolor{keywordtype}{short}\ GetParameters()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ parameters;\ \}}
\DoxyCodeLine{00192\ \ \ \textcolor{keywordtype}{void}\ Assign(\textcolor{keyword}{const}\ TSRestraintList\&\ rl);}
\DoxyCodeLine{00193\ \ \ \textcolor{keywordtype}{void}\ Clear();}
\DoxyCodeLine{00194\ \ \ \textcolor{keywordtype}{short}\ GetRestraintListType()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ RestraintListType;\ \}}
\DoxyCodeLine{00195\ \ \ \textcolor{keywordtype}{void}\ UpdateResi();}
\DoxyCodeLine{00196\ \ \ \textcolor{comment}{//\ this\ is\ called\ internally\ by\ the\ RM}}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{void}\ OnAUUpdate();}
\DoxyCodeLine{00198\ \ \ \textcolor{keywordtype}{void}\ BeginAUSort();}
\DoxyCodeLine{00199\ \ \ \textcolor{keywordtype}{void}\ EndAUSort();}
\DoxyCodeLine{00200\ \ \ \textcolor{keywordtype}{void}\ SortAtomsByTags();}
\DoxyCodeLine{00201\ \ \ \textcolor{comment}{//\ IXVarReferencerContainer\ implementation}}
\DoxyCodeLine{00202\ \ \ \textcolor{keyword}{virtual}\ olxstr\ GetIdName()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ IdName;\ \}}
\DoxyCodeLine{00203\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{size\_t}\ GetIdOf(\textcolor{keyword}{const}\ \mbox{\hyperlink{classIXVarReferencer}{IXVarReferencer}}\&\ vr)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordflow}{if}\ (!vr.Is<\mbox{\hyperlink{classTSimpleRestraint}{TSimpleRestraint}}>())\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classTInvalidArgumentException}{TInvalidArgumentException}}(\_\_OlxSourceInfo,\ \textcolor{stringliteral}{"{}var\ referencer"{}});}
\DoxyCodeLine{00206\ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{classTSimpleRestraint}{TSimpleRestraint}}\&)vr).GetReleasableId();}
\DoxyCodeLine{00208\ \ \ \}}
\DoxyCodeLine{00209\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{size\_t}\ GetPersistentIdOf(\textcolor{keyword}{const}\ \mbox{\hyperlink{classIXVarReferencer}{IXVarReferencer}}\&\ vr)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{return}\ GetIdOf(vr);}
\DoxyCodeLine{00211\ \ \ \}}
\DoxyCodeLine{00212\ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classIXVarReferencer}{IXVarReferencer}}\&\ GetReferencer(\textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{classIXVarReferencer}{IXVarReferencer}}\&)GetItem(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00214\ \ \ \}}
\DoxyCodeLine{00215\ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{size\_t}\ ReferencerCount()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ items.Count();\ \}}
\DoxyCodeLine{00216\ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00217\ \ \ \textcolor{keywordtype}{void}\ ToDataItem(\mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00218\ \textcolor{preprocessor}{\#ifdef\ \_PYTHON}}
\DoxyCodeLine{00219\ \ \ PyObject*\ PyExport(\mbox{\hyperlink{classTPtrList}{TPtrList<PyObject>}}\&\ atoms,\ \mbox{\hyperlink{classTPtrList}{TPtrList<PyObject>}}\&\ equiv);}
\DoxyCodeLine{00220\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00221\ \ \ \textcolor{keywordtype}{void}\ FromDataItem(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}\&\ item);}
\DoxyCodeLine{00222\ \ \ \textcolor{keywordtype}{void}\ FromDataItem(\textcolor{keyword}{const}\ \mbox{\hyperlink{classTDataItem}{TDataItem}}*\ item)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{if}\ (item\ !=\ 0)\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ FromDataItem(*item);}
\DoxyCodeLine{00225\ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \}}
\DoxyCodeLine{00227\ \};}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classTTypeList}{TTypeList<TSimpleRestraint>}}\ TSimpleRestraintList;}
\DoxyCodeLine{00230\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classTPtrList}{TPtrList<TSimpleRestraint>}}\ TSimpleRestraintPList;}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ EndXlibNamespace()}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
